{% extends "template.twig" %}

{% block content %}
    <div class="container margintop200">
        <div class="row">
            <div class="col-md-12">
                {% if error is not empty %}
                    <div class="alert alert-danger">
                        {{ error }}
                    </div>
                {% endif %}
                {% if success is not empty %}
                    <div class="alert alert-success">
                        {{ success }}
                    </div>
                {% endif %}
                {% if resetpasswordform is not empty %}
                    <form action="/{{ project.title }}-{{ project.id }}/reinitialisation-mot-de-passe" method="POST">
                        {% autoescape %}
                            {{ resetpasswordform.email|raw }}
                            {{ resetpasswordform.submit|raw }}
                        {% endautoescape %}
                    </form>
                {% endif %}
                {% if newpasswordform is defined %}
                    {% if key is defined %}
                        <form action="/{{ project.title }}-{{ project.id }}/nouveau-mot-de-passe-{{ key }}" method="POST">
                            {% autoescape %}
                                {{ newpasswordform.password|raw }}
                                {{ newpasswordform.submit|raw }}
                            {% endautoescape %}
                        </form>
                    {% endif %}
                {% endif %}
            </div>
        </div>
        <div class="row">
            <div class="col-md-8">
                <h1>{{ project.title }}</h1>
                <p>{{ project.intro }}</p>
            </div>
            <div class="col-md-4">
                <p><strong>Date de mise en ligne: </strong>{{ project.realisation_date }}<br>
                <strong>Technologies: </strong>{{ project.technologies }}<br>
                <a href="{{ project.url }}" target="_blank">Voir le site web</a></p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <p>{{ project.content }}</p>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                {% if connectionform is not empty %}
                    {% if accountform is not empty %}
                        <h3>Connectez-vous ou inscrivez-vous pour laisser des commentaires</h3>
                    {% endif %}
                {% endif %}
                {% if commentlist is defined %}
                    <h3>Les commentaires</h3>
                    {% for comment in commentlist  %}
                        <div class="row">
                            <div class="col-md-12">
                                <h4>{{ comment.pseudo }}</h4>
                                <h5>{{ comment.comment_date }}</h5>
                                <p>{{ comment.content }}</p>
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                {% if connectionform is not empty %}
                    {% if accountform is not empty %}
                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="connection-tab" data-toggle="tab" role="tab" href="#connection">Connexion</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="inscription-tab" data-toggle="tab" role="tab" href="#inscription">Inscription</a>
                            </li>
                        </ul>
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade show active" id="connection" role="tabpanel" aria-labelledby="connection-tab">
                                <form action="/{{ project.title }}-{{ project.id }}/connection" method="POST">
                                    {% autoescape %}
                                        {{ connectionform.email|raw }}
                                        {{ connectionform.password|raw }}
                                        {{ connectionform.submit|raw }}
                                    {% endautoescape %}
                                </form>
                                <a href="/{{ project.title }}-{{ project.id }}/mot-de-passe-oublie">Mot de passe oublié ?</a>
                            </div>
                            <div class="tab-pane fade" id="inscription" role="tabpanel" aria-labelledby="inscription-tab">
                                <form action="/{{ project.title }}-{{ project.id }}/inscription" method="POST">
                                    {% autoescape %}
                                        {{ accountform.first_name_account|raw }}
                                        {{ accountform.email|raw }}
                                        {{ accountform.password|raw }}
                                        {{ accountform.submit|raw }}
                                    {% endautoescape %}
                                </form>
                            </div>
                        </div>
                    {% endif  %}
                {% endif  %}
                {% if commentform is not empty %}
                        <form action="/{{ project.title }}-{{ project.id }}/ajouter-un-commentaire" method="POST">
                            {% autoescape %}
                                {{ commentform.comment|raw }}
                                {{ commentform.submit|raw }}
                            {% endautoescape %}
                        </form>
                        <a href="/{{ project.title }}-{{ project.id }}/deconnexion">déconnexion</a>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}